<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.kr.samman.dao.NoticeBoardDao">
	<select id="noticeBoardList" resultType="co.kr.samman.dto.board">
		SELECT BNUM, USERID, BTITLE, BCONTENT, BPICNAME, BDATE, BSUB FROM BOARDT
		WHERE BSUB=1  ORDER BY BNUM DESC
	</select>

	<select id="noticereplyList" resultType="co.kr.samman.dto.cont">
		SELECT USERT.UNAME
		USERNAME, CONT.CNUM CNUM, CONT.BNUM BNUM, CONT.CCONTENT CCONTENT,
		CONT.CDATE CDATE
		FROM CONT
		INNER JOIN USERT
		ON
		CONT.USERID=USERT.USERID
		ORDER BY CONT.CNUM ASC 
	</select>
	
	<insert id="writenotice" parameterType="co.kr.samman.dto.board">
	INSERT INTO BOARDT
	 (USERID, BTITLE, BCONTENT, BPICNAME, BDATE, BSUB)
	 VALUES
	 ('admin', #{btitle},#{bcontent},#{bpicname},NOW(),1)
	</insert>
	
	<select id="getConcertdetail" parameterType="Integer" resultType="co.kr.samman.dto.board" >
		SELECT BNUM, USERID, BTITLE, BCONTENT, BPICNAME, BDATE, BSUB FROM BOARDT
		WHERE BSUB=1 AND BNUM = #{param1}
	</select>
	
	<update id="concertupdate" parameterType="co.kr.samman.dto.board">
		UPDATE 
BOARDT 
SET BTITLE=#{btitle},
BCONTENT =#{bcontent},
BPICNAME=#{bpicname},
BDATE=NOW()
where BNUM=#{bnum};
	</update>
</mapper>